#!/bin/bash -e
set -e
export PATH=@CMAKE_BINARY_DIR@/:/opt/pg/scripts:/opt/pg/scripts/gcloud/aurora/pipeline_scripts/alps:$PATH
. gc_helpers.sh
source help.sh
if [ $1 != "init" ]; then
    . aurora_utils.sh
fi

case $1 in
    init)
      init_id ${@:2} ;;
    ls)
      list_entities ${@:2} ;;
    rm)
      delete_entities ${@:2} ;;
    login)
      login_instance ${@:2} ;;
    build)
      aurora_build.sh ${@:2} ;;
    run)
      aurora_run.sh ${@:2} ;;
    pipeline)
      run_pipelines.sh --base_script_dir "@CMAKE_CURRENT_BINARY_DIR@/pipeline_scripts/alps/" ${@:2} ;;
    debug-test)
      run_debug_test ${@:2} ;;
    upload)
      upload_using_instance_name ${@:2} ;;
    download)
      download_using_instance_name ${@:2} ;;
    load)
      aurora_load.sh ${@:2} ;;
    set_max_instances)
      set_max_instances ${@:2} ;;
    help)
      show_aurora_help ;;
    *)
      show_aurora_help
    ;;
esac
